/*! WebGL_test - ver. 0.1.0 */
Vue.component("listitem",{props:{level:Number,index:Number,section:{type:Object},item:{type:Object},src:Array},template:"#listitem-template",data:function(){return{hover:!1,open:!0,selected:!1}},computed:{hasData:function(){var a=this.item.data&&this.item.data.length>0;return a}},events:{removeDataItem:function(a){this.item.data.splice(a,1)},updateName:function(a,b){this.item.name=a,this.$dispatch("saveStorage")}},methods:{info:function(){this.$dispatch("updateInfo",this.item.name)},addSub:function(){this.item.data=this.item.data||[],this.item.data.push({name:"NewItem type",data:[]}),this.$dispatch("saveStorage")},remove:function(){this.$dispatch("removeDataItem",this.index),this.$dispatch("saveStorage")}}}),Vue.component("editable",{props:{value:String,idx:Number,src:{type:Array}},template:"#item-editable",data:function(){return{values:[],tempValue:"",selected:!1}},computed:{hasSrc:function(){return this.src&&this.src.length>0},values:function(){return this.value.split(" ")}},methods:{select:function(){this.selected=!0,this.tempValue=this.value,this.hasSrc||(this.$els.field.style.display="inline",this.$els.field.focus())},deselect:function(){this.selected=!1,this.value=this.tempValue,this.hasSrc||(this.$els.field.style.display="none")},update:function(){this.selected=!1,this.$els.field.style.display="none";var a=this.value.trim();a&&(this.value=a.replace(/ +/g," "),this.tempValue=this.value,this.$dispatch("updateName",this.value,this.idx))}}}),Vue.config.debug=!1,Vue.component("viewport",{props:["app"],data:function(){return{componentTypes:this.$parent.componentTypes,systems:this.$parent.systems}},compiled:function(){console.log("Viewport loaded");var a=this.$el,b=[];new SystemManager(b);b.length<1&&console.log("No component lists found!"),this.app=new App(a),console.log("gl",gl)},template:'<canvas id="draw"></canvas>'}),Vue.component("editabletext",{props:["textContent"],data:function(){return{textModified:"",viewable:!1}},methods:{keyEdit:function(a){this.textModified=a.target.innerText,9==a.keyCode&&(document.execCommand("styleWithCSS",!1,null),document.execCommand("indent",!0,null),a.preventDefault())},save:function(){this.textModified.trim()&&this.$dispatch("saveCode",this.textModified)}},watch:{textContent:function(){this.textModified=this.textContent,this.viewable=""!=this.textContent,Prism.highlightAll()}}});var vm=new Vue({el:"#app",data:{newItem:"",info:"WebGL test",component_data:null,system_data:null,app:null,componentTypes:[],systems:[],section:{},sections:[{name:"Component",icon:"&#xf01c;",color:"#fb0"},{name:"System",icon:"&#xf04e;",color:"#bf7"},{name:"EntityTemplate",icon:"&#xf020;",color:"#7ff"},{name:"ScreenElement",icon:"&#xf11e;",color:"#0bf"}],sectionData:{name:"",data:[]}},compiled:function(){var a=this;this.section=this.sections[0],this.sections.forEach(function(b){var c=b.name.toLowerCase()+"_data";a[c]=JSON.parse(localStorage.getItem(c))||{name:b.name+"s",data:[]}}),this.sectionData=this[this.section.name.toLowerCase()+"_data"],this.sections[1].src=this.component_data.data,this.component_data.data.forEach(function(b){a.componentTypes.push(new ComponentType(b.name))}),gl||this.$emit("updateInfo","WebGL required"),null==app.currentScreen&&this.$emit("updateInfo","No screens found!")},events:{saveStorage:function(){var a=this.section.name.toLowerCase()+"_data";localStorage.setItem(a,JSON.stringify(this.sectionData))},updateInfo:function(a){this.info=a}},methods:{setView:function(a){a.text!=this.section.name&&(this.editorText=""),this.section=a,this.sectionData=this[a.name.toLowerCase()+"_data"]},addItem:function(){var a=this.newItem.trim();if(a){var b=this.sectionData.length+1;this.sectionData.data.push({name:a,type:b,data:[]}),this.newItem="",this.$emit("saveStorage"),"Component"==this.section.name&&this.componentTypes.push(new ComponentType(a))}}}});