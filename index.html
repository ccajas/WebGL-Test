<!DOCTYPE html>
<html>
<head>
	<title>WebGL test</title>
	<meta charset="utf-8"/>
	<link rel="stylesheet" href="css/main.css" />
	<link rel="stylesheet" href="css/prism.css" />
</head>
</body>
	<div id="app">
		<div id="container">
		<header>
			<div id="app-title">Framework test</div>
			<div id="title">Test</div>
			<ul id="topnav">
				<li v-for="s in sections">
					<a :class="{ hl: section.name == s.name }" v-on:click="setView(s)">{{ s.name }}s</a>
				</li>
			</ul>
		</header>
		<div id="main">
			<section id="sidebar">
				<ul class="icon-nav">
					<li v-for="s in sections">
						<a :class="{ hl: section.name == s.name }" v-on:click="setView(s)">
							<span class="batch">{{{ s.icon }}}</span>
						</a>
					</li>
				</ul>
				<div class="input-w">
					<input v-model="newItem" v-on:keyup.enter="addItem" 
						placeholder="enter new {{ section.name }}"/>
				</div>

				<ul class="hierarchy">
					<listitem :item="sectionData" :icon="section.icon" :src="section.src" 
						:level="0" :index="$index">
					</listitem>
				</ul>

				<!-- listitem template -->
				<script type="text/x-template" id="listitem-template">
					<li>
						<div>
							<span @click="open = !open" class="batch">{{{ icon }}}</span>
							<item :src="src" :value="item.name" :idx="index" :meta="false"></item>
							<item :src="src" :value="item.meta" :idx="index" :meta="true" v-if="item.meta"></item>

							<button v-if="level > 0" class="batch warn" @click="remove">&#xf14e;</button>
							<button v-if="level > 0" class="batch conf" @click="addSub">&#xf14c;</button>
						</div>						
						<ul class="sub" v-if="hasData" v-show="open">
							<listitem v-for="item in item.data" :level="level+1" :item="item" 
								:src="src" :index="$index" :icon="icon">
							</listitem>
						</ul>
					</li>
				</script>

				<!-- single editable item -->
				<script type="text/x-template" id="item-editable">
					<span>
						<span @dblclick="select" v-show="!selected">
							<i v-if="meta">{{ value }}</i>
							<span v-if="!meta">{{ value }}</span>
						</span>
						<input v-el:field v-model="value" :class="{ meta: meta }"
							@keyup.enter="update"
							@keyup.esc="deselect" @blur="deselect"/>

						<!-- custom combo box -->
						<ul v-if="hasSrc" @keyup.esc="deselect" @blur="deselect">
							<li>Source</li>
						</ul>
					</span>
				</script>
				
			</section>
			<section id="viewport">
				<viewport></viewport>
				<editable :text-content="editorText" inline-template>
					<div class="textedit" v-if="viewable">				
						<ul class="icon-nav">
							<li><a>Code Editor</a></li>
							<li><a v-on:click="save"><span class="batch">&#xf059;</span></a></li>
							<li><a v-on:click="viewable = false"><span class="batch">&#xf0c5;</span></a></li>
						</ul>
						<code>
							<pre v-on:keyup="keyEdit($event)" spellcheck="false"
							contenteditable="{{ viewable }}" class="language-json">{{ textContent }}</pre>
						</code>
					</div>			
				</editable>
			</section>
		</div>
	</div>
	<script src="lib/vue.js"></script>
	<script src="lib/prism.js"></script>
	<script src="framework.js"></script>
	<script src="editor.js"></script>
</body>
</html>