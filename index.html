<!DOCTYPE html>
<html>
<head>
	<title>WebGL test</title>
	<meta charset="utf-8"/>
	<link rel="stylesheet" href="css/main.css" />
	<link rel="stylesheet" href="css/prism.css" />
</head>
</body>
	<div id="app">
		<div id="container">
		<header>
			<div id="app-title">Framework test</div>
			<div id="title">Test</div>
			<ul id="topnav">
				<li v-for="s in sections">
					<a :class="{ hl: section.name == s.name }" v-on:click="setView(s)">{{ s.name }}s</a>
				</li>
			</ul>
		</header>
		<div id="main">
			<section id="sidebar">
				<ul class="icon-nav">
					<li v-for="s in sections">
						<a :class="{ hl: section.name == s.name }" v-on:click="setView(s)">
							<span class="batch">{{{ s.icon }}}</span>
						</a>
					</li>
				</ul>
				<div class="input-w">
					<input v-model="newItem" v-on:keyup.enter="addItem" 
						placeholder="Enter new {{ section.name }}"/>
				</div>

				<ul class="hierarchy">
					<listitem :item="sectionData" :section="section" :level="0" :index="$index">
					</listitem>
				</ul>

				<!-- listitem template -->
				<script type="text/x-template" id="listitem-template">
					<li>
						<div v-on:mouseover="info">
							<span v-on:click="open = !open" class="batch">{{{ section.icon }}}
								<span v-if="hasData" v-show="!open">{{{ '&#xf01d' }}}</span>
							</span>
							<editable :src="src" :value="item.name" :idx="index"></editable>

							<button v-if="level > 0" class="batch warn" v-on:click="remove">&#xf14e;</button>
							<button v-if="level > 0" class="batch conf" v-on:click="addSub">&#xf14c;</button>
						</div>						
						<ul class="sub" v-if="hasData" v-show="open">
							<listitem v-for="item in item.data" :level="level+1" :item="item" 
								:index="$index" :section="section">
							</listitem>
						</ul>
					</li>
				</script>

				<!-- single editable item -->
				<script type="text/x-template" id="item-editable">
					<span>
						<span v-on:dblclick="select" v-show="!selected">
							{{ values[0] }}
							<i v-if="values[1]">{{ values[1] }}</i>
						</span>
						<input v-el:field v-model="value" :class="{ meta: meta }"
							v-on:keyup.enter="update"
							v-on:keyup.esc="deselect" v-on:blur="deselect"/>

						<!-- custom combo box -->
						<!-- <ul v-if="hasSrc" v-on:keyup.esc="deselect" v-on:blur="deselect">
							<li>Source</li>
						</ul> -->
					</span>
				</script>
				
			</section>

			<section id="viewport" :app="app">
				<viewport></viewport>
			</section>
		</div>
		<footer>
			<div id="info-text">{{ info }}</div>
		</footer>
	</div>
	<script src="lib/vue.js"></script>
	<script src="lib/prism.js"></script>
	<script src="framework.js"></script>
	<script src="editor.js"></script>
</body>
</html>